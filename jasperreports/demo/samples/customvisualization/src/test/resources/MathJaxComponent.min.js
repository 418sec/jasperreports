if (typeof define === 'function' && define.amd){}
else if (typeof __visualize__ !== 'undefined' &&
typeof __visualize__.define === 'function')
{
}

(function(root){

var define = root.define;

define('mathjax',[], function () {

	 return function (instanceData) {	
	       
         
            document.getElementsByTagName("body")[0].className += " cvc-processing";
         
            console.log("hello world!");
         
            var div = document.getElementById(instanceData.id);
         
            div.innerHTML = div.innerHTML + "$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$";
         
            div.addEventListener("cvcRenderingCompleted", function(e) {
              console.log(e.detail); // Prints "Example of an event"
            });
         
         //+ "<script type=\"text/x-mathjax-config\">MathJax.Hub.Config({SVG: { useGlobalCache: false}} });<---script>";
         
    window.MathJax = {
        showProcessingMessages: false,
        showMathMenu: false,
        displayAlign: "left",
          SVG: {
            useFontCache : false
          }
    };
         
        
         
    
    var head = document.getElementsByTagName("head")[0];
         
     var script = document.createElement("script");
        script.type = "text/javascript";
        script.src  = "http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG";
         
         console.log("ready to load!");
         
        head.addEventListener("load", function(event) {
                    if (event.target.nodeName === "SCRIPT")
                    {
                            console.log("Finished to load");
                            //alert("Script loaded: " + event.target.getAttribute("src"));
                            MathJax.Hub.Queue(function () { 
                                
                                var eles = div.getElementsByClassName("MathJax_SVG_Display");
                                
                                if (eles.length > 0)
                                {
                                    var ele = eles[0];
                                    ele.removeAttribute("style");
                                    ele.removeAttribute("class");
                                    console.log("*** MathJax is done ***");
                                    
                                     if (document.createEvent) {
                                        event = document.createEvent("HTMLEvents");
                                        event.initEvent("cvcRenderingCompleted", true, true);
                                      } else {
                                        event = document.createEventObject();
                                        event.eventType = "cvcRenderingCompleted";
                                      }

                                      event.eventName = "cvcRenderingCompleted";

                                      if (document.createEvent) {
                                        div.dispatchEvent(event);
                                      } else {
                                        div.fireEvent("on" + event.eventType, event);
                                      }
                                    
                                    
                                      //document.getElementsByTagName("body")[0].className += " cvc-processed";
                                }
                            });
                    }
                }, true);
         
        document.getElementsByTagName("head")[0].appendChild(script);
         
         
    };
		
    
});




}(typeof __visualize__ != 'undefined' ? __visualize__ : window));
